(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-59bff236"],{2909:function(t,e,r){"use strict";function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,o=new Array(e);r<e;r++)o[r]=t[r];return o}function c(t){if(Array.isArray(t))return o(t)}r.d(e,"a",(function(){return s}));r("a4d3"),r("e01a"),r("d3b7"),r("d28b"),r("3ca3"),r("ddb0"),r("a630");function a(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}r("fb6a"),r("b0c0");function n(t,e){if(t){if("string"===typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}function i(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(t){return c(t)||a(t)||n(t)||i()}},a63e:function(t,e,r){"use strict";r("159b");var o={methods:{fadeInOnLoad:function(){var t=document.querySelectorAll(".fade-out"),e=document.getElementById("target").offsetTop,r=window,o=r.innerHeight;t.forEach((function(t){o-t.offsetTop>=o-e&&t.classList.add("fade-in")}))},fadeInOnScroll:function(){var t=document.querySelectorAll(".fade-out"),e=document.getElementById("target").offsetTop,r=window,o=r.innerHeight,c=window.scrollY;t.forEach((function(t){c+e-t.offsetTop>=o-e&&t.classList.add("fade-in")}))}},mounted:function(){window.addEventListener("scroll",this.fadeInOnScroll)},unmounted:function(){window.removeEventListener("scroll",this.fadeInOnScroll)}};const c=o;e["a"]=c},d28b:function(t,e,r){var o=r("746f");o("iterator")},d81d:function(t,e,r){"use strict";var o=r("23e7"),c=r("b727").map,a=r("1dde"),n=a("map");o({target:"Array",proto:!0,forced:!n},{map:function(t){return c(this,t,arguments.length>1?arguments[1]:void 0)}})},ed84:function(t,e,r){"use strict";r.r(e);var o=r("7a23"),c={class:"container px-3 pb-5"},a=Object(o["createVNode"])("h1",{class:"fs-4 text-center py-3"},"PANYA 手感烘焙",-1),n={class:"category list-unstyled d-flex justify-content-center mt-4"},i=Object(o["createTextVNode"])(" 全部 "),s={class:"products row g-0 g-md-3 p-0 mt-5 list-unstyled"},l=Object(o["createVNode"])("div",{id:"target",class:"position-fixed vw-100 bottom-0"},null,-1);function d(t,e,r,d,u,p){var f=Object(o["resolveComponent"])("router-link"),b=Object(o["resolveComponent"])("Product"),m=Object(o["resolveComponent"])("Pagination");return Object(o["openBlock"])(),Object(o["createBlock"])("div",c,[a,Object(o["createVNode"])("ul",n,[u.products.length>0?(Object(o["openBlock"])(),Object(o["createBlock"])("li",{key:0,class:["btn btn-outline-primary p-0","all"===u.isActive?"active":""],onClick:e[1]||(e[1]=function(t){return p.filterProducts(1,"all"),u.isActive="all"})},[Object(o["createVNode"])(f,{class:"px-3 px-md-4 py-1",to:{query:{category:"all",page:1}}},{default:Object(o["withCtx"])((function(){return[i]})),_:1})],2)):Object(o["createCommentVNode"])("",!0),(Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(u.category,(function(t,e){return Object(o["openBlock"])(),Object(o["createBlock"])("li",{class:["btn btn-outline-primary p-0 ms-1",u.isActive===t?"active":""],key:e,onClick:function(e){return p.filterProducts(1,t),u.isActive=t}},[Object(o["createVNode"])(f,{class:"px-3 px-md-4 py-1",to:{query:{category:t,page:1}}},{default:Object(o["withCtx"])((function(){return[Object(o["createTextVNode"])(Object(o["toDisplayString"])(t),1)]})),_:2},1032,["to"])],10,["onClick"])})),128))]),Object(o["createVNode"])("ul",s,[Object(o["createVNode"])(b,{"filter-datas":u.filterDatas,"is-disabled":r.isDisabled},null,8,["filter-datas","is-disabled"])]),l,Object(o["createVNode"])(m,{pages:u.pages,onGetDatas:p.filterProducts},null,8,["pages","onGetDatas"])])}var u=r("2909"),p=(r("d81d"),r("d3b7"),r("6062"),r("3ca3"),r("ddb0"),r("159b"),r("4de4"),r("99af"),r("b0c0"),r("a397")),f=r("25f3"),b={key:0,class:"sale"},m=Object(o["createVNode"])("small",null,"查看內容",-1),g={class:"products-body p-3"},h={class:"products-price mt-1"},y={key:0},O=Object(o["createTextVNode"])(" 加入購物車 "),j={key:0,class:"d-block text-danger mt-1"};function v(t,e,r,c,a,n){var i=Object(o["resolveComponent"])("Spinner");return Object(o["openBlock"])(!0),Object(o["createBlock"])(o["Fragment"],null,Object(o["renderList"])(r.filterDatas,(function(e){return Object(o["openBlock"])(),Object(o["createBlock"])("li",{class:"products-item col-10 col-md-4 mx-auto mx-md-0 mb-5 fade-out",key:e.id},[Object(o["createVNode"])("div",{class:"products-img px-3",style:{"background-image":"url(".concat(e.imageUrl,")")},role:"button",onClick:function(r){return t.$router.push("/product/".concat(e.id))}},[e.price<e.origin_price?(Object(o["openBlock"])(),Object(o["createBlock"])("span",b,"On Sale")):Object(o["createCommentVNode"])("",!0),m],12,["onClick"]),Object(o["createVNode"])("div",g,[Object(o["createVNode"])("p",{class:"products-title m-0",role:"button",onClick:function(r){return t.goToProduct(e.id)}},Object(o["toDisplayString"])(e.title),9,["onClick"]),Object(o["createVNode"])("p",h,[e.price<e.origin_price?(Object(o["openBlock"])(),Object(o["createBlock"])("span",y,"$"+Object(o["toDisplayString"])(t.$cash(e.price))+" ",1)):Object(o["createCommentVNode"])("",!0),Object(o["createVNode"])("small",{class:e.price<e.origin_price?"del":""},"$"+Object(o["toDisplayString"])(t.$cash(e.origin_price))+" NTD",3)]),Object(o["createVNode"])("button",{type:"button",class:"btn btn-sm btn-outline-primary mx-auto fs-6",disabled:r.isDisabled===e.id||e.is_max,onClick:function(t){return n.addToCart(e)}},[O,Object(o["createVNode"])(i,{"spin-item":e.id},null,8,["spin-item"])],8,["disabled","onClick"]),e.is_max?(Object(o["openBlock"])(),Object(o["createBlock"])("small",j,"已達可購買最大數量")):Object(o["createCommentVNode"])("",!0)])])})),128)}var k={props:["filterDatas","isDisabled"],emits:["add-cart","toggle-spinner"],methods:{addToCart:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.$emitter.emit("add-cart",{item:t,qty:e}),this.$emitter.emit("toggle-spinner",{id:t.id})}}},A=r("6b0d"),w=r.n(A);const C=w()(k,[["render",v]]);var x=C,N=r("a63e"),V={inject:["provideCart"],emits:["page-loading","push-message"],props:["datas","isDisabled"],components:{Product:x},data:function(){return{products:[],pages:[],category:[],filterDatas:[],tempArry:[],isActive:"all",path:{category:"",page:""},isMax:!1}},mixins:[N["a"]],methods:{getAllProducts:function(){var t=this;Object(p["b"])().then((function(e){e.data.success||t.$pushMessage(e),t.products=e.data.products.reverse();var r=t.products.map((function(t){return t.category})),o=new Set(r);t.category=Object(u["a"])(o),t.filterProducts(t.path.page,t.path.category),t.$emitter.emit("page-loading",!1)})).catch((function(e){t.$emitter.emit("page-loading",!1),t.$pushMessage(e)}))},filterCart:function(){var t=this;this.filterDatas.forEach((function(e){var r=e,o=t.provideCart.data.carts.filter((function(t){return e.id===t.product_id&&t.qty>=30}));o.length>0?r.is_max=!0:r.is_max=!1}))},getPath:function(){this.path.category=this.$route.query.category||"all",this.path.page=this.$route.query.page||1,this.isActive=this.path.category},filterProducts:function(t){var e=this;this.getPath(),"all"===this.path.category?this.tempArry=this.products:this.tempArry=this.products.filter((function(t){return t.category===e.path.category}));var r=Object(f["g"])(t,this.tempArry);this.pages=r.pages,this.filterDatas=r.newArray,this.filterCart(),this.$router.push("./products?category=".concat(this.path.category,"&page=").concat(t)),setTimeout((function(){e.fadeInOnLoad()}),0)}},watch:{$route:{handler:function(t){"Products"===t.name&&this.filterProducts(t.query.page||1,t.query.category||"all")},deep:!0},datas:function(){this.getAllProducts()}},mounted:function(){this.$emitter.emit("page-loading",!0),this.getPath(),this.getAllProducts()}};const B=w()(V,[["render",d]]);e["default"]=B},fb6a:function(t,e,r){"use strict";var o=r("23e7"),c=r("861d"),a=r("e8b5"),n=r("23cb"),i=r("50c4"),s=r("fc6a"),l=r("8418"),d=r("b622"),u=r("1dde"),p=u("slice"),f=d("species"),b=[].slice,m=Math.max;o({target:"Array",proto:!0,forced:!p},{slice:function(t,e){var r,o,d,u=s(this),p=i(u.length),g=n(t,p),h=n(void 0===e?p:e,p);if(a(u)&&(r=u.constructor,"function"!=typeof r||r!==Array&&!a(r.prototype)?c(r)&&(r=r[f],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return b.call(u,g,h);for(o=new(void 0===r?Array:r)(m(h-g,0)),d=0;g<h;g++,d++)g in u&&l(o,d,u[g]);return o.length=d,o}})}}]);
//# sourceMappingURL=chunk-59bff236.73211d2f.js.map