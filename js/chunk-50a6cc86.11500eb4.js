(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50a6cc86"],{"1dde":function(e,t,c){var n=c("d039"),a=c("b622"),o=c("2d00"),r=a("species");e.exports=function(e){return o>=51||!n((function(){var t=[],c=t.constructor={};return c[r]=function(){return{foo:1}},1!==t[e](Boolean).foo}))}},"99af":function(e,t,c){"use strict";var n=c("23e7"),a=c("d039"),o=c("e8b5"),r=c("861d"),i=c("7b0b"),s=c("50c4"),l=c("8418"),u=c("65f0"),d=c("1dde"),p=c("b622"),m=c("2d00"),b=p("isConcatSpreadable"),f=9007199254740991,j="Maximum allowed index exceeded",O=m>=51||!a((function(){var e=[];return e[b]=!1,e.concat()[0]!==e})),g=d("concat"),V=function(e){if(!r(e))return!1;var t=e[b];return void 0!==t?!!t:o(e)},h=!O||!g;n({target:"Array",proto:!0,forced:h},{concat:function(e){var t,c,n,a,o,r=i(this),d=u(r,0),p=0;for(t=-1,n=arguments.length;t<n;t++)if(o=-1===t?r:arguments[t],V(o)){if(a=s(o.length),p+a>f)throw TypeError(j);for(c=0;c<a;c++,p++)c in o&&l(d,p,o[c])}else{if(p>=f)throw TypeError(j);l(d,p++,o)}return d.length=p,d}})},a397:function(e,t,c){"use strict";c.d(t,"D",(function(){return i})),c.d(t,"E",(function(){return s})),c.d(t,"C",(function(){return l})),c.d(t,"l",(function(){return u})),c.d(t,"A",(function(){return d})),c.d(t,"j",(function(){return p})),c.d(t,"B",(function(){return m})),c.d(t,"q",(function(){return b})),c.d(t,"y",(function(){return f})),c.d(t,"g",(function(){return j})),c.d(t,"s",(function(){return O})),c.d(t,"z",(function(){return g})),c.d(t,"h",(function(){return V})),c.d(t,"i",(function(){return h})),c.d(t,"o",(function(){return N})),c.d(t,"m",(function(){return v})),c.d(t,"w",(function(){return y})),c.d(t,"e",(function(){return x})),c.d(t,"b",(function(){return k})),c.d(t,"t",(function(){return $})),c.d(t,"p",(function(){return w})),c.d(t,"a",(function(){return B})),c.d(t,"x",(function(){return T})),c.d(t,"d",(function(){return D})),c.d(t,"f",(function(){return S})),c.d(t,"c",(function(){return C})),c.d(t,"r",(function(){return E})),c.d(t,"u",(function(){return M})),c.d(t,"v",(function(){return U})),c.d(t,"k",(function(){return q})),c.d(t,"n",(function(){return F}));c("99af");var n=c("bc3a"),a=c.n(n),o="https://vue3-course-api.hexschool.io",r="panya",i=function(e){return a.a.post("".concat(o,"/admin/signin"),e)},s=function(){return a.a.post("".concat(o,"/logout"))},l=function(){return a.a.post("".concat(o,"/api/user/check"))},u=function(){return a.a.get("".concat(o,"/api/").concat(r,"/admin/products/all"))},d=function(e,t,c){return a.a[e]("".concat(o,"/api/").concat(r,"/admin/product/").concat(c),t)},p=function(e){return a.a.delete("".concat(o,"/api/").concat(r,"/admin/product/").concat(e))},m=function(e){return a.a.post("".concat(o,"/api/").concat(r,"/admin/upload"),e)},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return a.a.get("".concat(o,"/api/").concat(r,"/admin/coupons?page=").concat(e))},f=function(e,t,c){return a.a[e]("".concat(o,"/api/").concat(r,"/admin/coupon/").concat(c),t)},j=function(e){return a.a.delete("".concat(o,"/api/").concat(r,"/admin/coupon/").concat(e))},O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return a.a.get("".concat(o,"/api/").concat(r,"/admin/orders?page=").concat(e))},g=function(e,t){return a.a.put("".concat(o,"/api/").concat(r,"/admin/order/").concat(e),t)},V=function(e){return a.a.delete("".concat(o,"/api/").concat(r,"/admin/order/").concat(e))},h=function(){return a.a.delete("".concat(o,"/api/").concat(r,"/admin/orders/all"))},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return a.a.get("".concat(o,"/api/").concat(r,"/admin/articles?page=").concat(e))},v=function(e){return a.a.get("".concat(o,"/api/").concat(r,"/admin/article/").concat(e))},y=function(e,t,c){return a.a[e]("".concat(o,"/api/").concat(r,"/admin/article/").concat(c),t)},x=function(e){return a.a.delete("".concat(o,"/api/").concat(r,"/admin/article/").concat(e))},k=function(){return a.a.get("".concat(o,"/api/").concat(r,"/products/all"))},$=function(e){return a.a.get("".concat(o,"/api/").concat(r,"/product/").concat(e))},w=function(){return a.a.get("".concat(o,"/api/").concat(r,"/cart"))},B=function(e){return a.a.post("".concat(o,"/api/").concat(r,"/cart"),e)},T=function(e,t){return a.a.put("".concat(o,"/api/").concat(r,"/cart/").concat(e),t)},D=function(){return a.a.delete("".concat(o,"/api/").concat(r,"/carts"))},S=function(e){return a.a.delete("".concat(o,"/api/").concat(r,"/cart/").concat(e))},C=function(e){return a.a.post("".concat(o,"/api/").concat(r,"/order"),e)},E=function(e){return a.a.get("".concat(o,"/api/").concat(r,"/order/").concat(e))},M=function(e){return a.a.post("".concat(o,"/api/").concat(r,"/pay/").concat(e))},U=function(e){return a.a.post("".concat(o,"/api/").concat(r,"/coupon"),e)},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return a.a.get("".concat(o,"/api/").concat(r,"/articles?page=").concat(e))},F=function(e){return a.a.get("".concat(o,"/api/").concat(r,"/article/").concat(e))}},b0c0:function(e,t,c){var n=c("83ab"),a=c("9bf2").f,o=Function.prototype,r=o.toString,i=/^\s*function ([^ (]*)/,s="name";n&&!(s in o)&&a(o,s,{configurable:!0,get:function(){try{return r.call(this).match(i)[1]}catch(e){return""}}})},b415:function(e,t,c){"use strict";c.r(t);c("b0c0");var n=c("7a23"),a={class:"container"},o={key:0,class:"row g-0 p-3"},r=Object(n["createStaticVNode"])('<ul class="steps row g-0 list-unstyled mb-4"><li class="col-4 active"><small class="ls-3">STEP1</small><span>確認訂單</span></li><li class="col-4"><small class="ls-3">STEP2</small><span>建立訂單</span></li><li class="col-4"><small class="ls-3">STEP3</small><span>完成訂單</span></li></ul>',1),i={key:1,class:"\n        min-vh-50\n        d-flex\n        flex-column\n        align-items-center\n        justify-content-center\n        text-secondary\n      "},s=Object(n["createVNode"])("span",{class:"material-icons mb-2 fs-2"}," announcement ",-1),l=Object(n["createVNode"])("p",{class:"fs-7",style:{"letter-spacing":"2px"}},"購物車內沒有商品",-1),u=Object(n["createTextVNode"])("挑選商品"),d={key:2,class:"row g-0 justify-content-between"},p={class:"col-md-6 col-lg-5 px-3 m-0"},m={class:"fs-4 d-flex mb-5"},b=Object(n["createTextVNode"])(" 確認訂單內容 "),f={class:"list-unstyled"},j={class:"cart-cont col px-3 d-flex"},O={class:"col-7 pe-2"},g={class:"m-0"},V={class:"col-5 ls-1 text-end"},h={class:"input-group mb-4"},N={key:0,type:"text",class:"form-control panya-input p-2",placeholder:"已套用優惠券",disabled:""},v=Object(n["createTextVNode"])(" 套用優惠券 "),y={key:0,class:"text-primary"},x=Object(n["createTextVNode"])(" 總計金額：$ "),k={class:"fs-4"},$=Object(n["createTextVNode"])(" NTD "),w={key:1},B={class:"fs-7 text-muted"},T={class:"text-primary"},D=Object(n["createTextVNode"])(" 折扣後金額：$ "),S={class:"fs-4"},C=Object(n["createTextVNode"])(" NTD "),E={class:"col-md-6 p-5 bg-white min-vh-50"},M=Object(n["createVNode"])("h2",{class:"fs-4 mb-4"},"填寫訂購資訊",-1),U={class:"list-unstyled"},q={class:"mb-3"},F=Object(n["createVNode"])("label",{for:"email",class:"form-label"},[Object(n["createVNode"])("span",{class:"text-danger"},"*"),Object(n["createTextVNode"])(" Email ")],-1),P={class:"mb-3"},_=Object(n["createVNode"])("label",{for:"name",class:"form-label"},[Object(n["createVNode"])("span",{class:"text-danger"},"*"),Object(n["createTextVNode"])(" 收件人姓名 ")],-1),A={class:"mb-3"},J=Object(n["createVNode"])("label",{for:"tel",class:"form-label"},[Object(n["createVNode"])("span",{class:"text-danger"},"*"),Object(n["createTextVNode"])(" 聯絡電話 ")],-1),z={class:"mb-3"},I=Object(n["createVNode"])("label",{for:"address",class:"form-label"},[Object(n["createVNode"])("span",{class:"text-danger"},"*"),Object(n["createTextVNode"])(" 收件地址 ")],-1),L=Object(n["createVNode"])("label",{for:"message",class:"form-label"},"備註",-1),G=Object(n["createVNode"])("button",{type:"submit",class:"btn btn-primary w-100 py-3 mt-5"}," 送出訂單 ",-1);function H(e,t,c,H,K,Q){var R=Object(n["resolveComponent"])("router-link"),W=Object(n["resolveComponent"])("Spinner"),X=Object(n["resolveComponent"])("Field"),Y=Object(n["resolveComponent"])("ErrorMessage"),Z=Object(n["resolveComponent"])("Form");return Object(n["openBlock"])(),Object(n["createBlock"])("div",a,[c.datas.total?(Object(n["openBlock"])(),Object(n["createBlock"])("div",o,[r])):Object(n["createCommentVNode"])("",!0),c.datas.total?(Object(n["openBlock"])(),Object(n["createBlock"])("div",d,[Object(n["createVNode"])("div",p,[Object(n["createVNode"])("h2",m,[b,Object(n["createVNode"])("button",{class:"btn btn-sm btn-outline-primary ms-2",type:"button",onClick:t[1]||(t[1]=function(t){return e.$emitter.emit("toggle-cart",!0)})},"修改內容")]),Object(n["createVNode"])("ul",f,[(Object(n["openBlock"])(!0),Object(n["createBlock"])(n["Fragment"],null,Object(n["renderList"])(c.datas.carts,(function(t){return Object(n["openBlock"])(),Object(n["createBlock"])("li",{class:"d-flex align-items-center mb-4",key:t},[Object(n["createVNode"])("div",{class:"cart-img",style:{"background-image":"url(".concat(t.product.imageUrl,")")}},null,4),Object(n["createVNode"])("div",j,[Object(n["createVNode"])("div",O,[Object(n["createVNode"])("p",g,Object(n["toDisplayString"])(t.product.title),1),Object(n["createVNode"])("small",null,"數量："+Object(n["toDisplayString"])(t.qty),1)]),Object(n["createVNode"])("div",V,"$ "+Object(n["toDisplayString"])(e.$cash(t.product.price))+" NTD",1)])])})),128))]),Object(n["createVNode"])("div",h,[K.isDiscount?(Object(n["openBlock"])(),Object(n["createBlock"])("input",N)):Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])("input",{key:1,type:"text",class:"form-control panya-input p-2",placeholder:"輸入優惠碼","onUpdate:modelValue":t[2]||(t[2]=function(e){return K.code=e})},null,512)),[[n["vModelText"],K.code]]),Object(n["createVNode"])("button",{type:"button",class:"btn btn-sm btn-primary px-3",disabled:K.isDiscount,onClick:t[3]||(t[3]=function(){return Q.useCoupon&&Q.useCoupon.apply(Q,arguments)})},[v,Object(n["createVNode"])(W,{"spin-item":K.code},null,8,["spin-item"])],8,["disabled"])]),K.isDiscount?(Object(n["openBlock"])(),Object(n["createBlock"])("div",w,[Object(n["createVNode"])("small",B," 總計金額：$ "+Object(n["toDisplayString"])(e.$cash(c.datas.total))+" NTD ",1),Object(n["createVNode"])("p",T,[D,Object(n["createVNode"])("span",S,Object(n["toDisplayString"])(e.$cash(Math.round(c.datas.final_total))),1),C])])):(Object(n["openBlock"])(),Object(n["createBlock"])("p",y,[x,Object(n["createVNode"])("span",k,Object(n["toDisplayString"])(e.$cash(Math.round(c.datas.total))),1),$]))]),Object(n["createVNode"])("div",E,[M,Object(n["createVNode"])(Z,{ref:"order",onSubmit:Q.onSubmit},{default:Object(n["withCtx"])((function(e){var c=e.errors;return[Object(n["createVNode"])("ul",U,[Object(n["createVNode"])("li",q,[F,Object(n["createVNode"])(X,{type:"email",id:"email",name:"Email",class:["form-control panya-input",{"is-invalid":c["Email"]}],placeholder:"請輸入 Email",rules:"email|required",inputmode:"email",modelValue:K.user.email,"onUpdate:modelValue":t[4]||(t[4]=function(e){return K.user.email=e})},null,8,["class","modelValue"]),Object(n["createVNode"])(Y,{name:"Email",class:"invalid-feedback"})]),Object(n["createVNode"])("li",P,[_,Object(n["createVNode"])(X,{type:"name",id:"name",name:"姓名",class:["form-control panya-input",{"is-invalid":c["姓名"]}],placeholder:"請輸入姓名",rules:"required",modelValue:K.user.name,"onUpdate:modelValue":t[5]||(t[5]=function(e){return K.user.name=e})},null,8,["class","modelValue"]),Object(n["createVNode"])(Y,{name:"姓名",class:"invalid-feedback"})]),Object(n["createVNode"])("li",A,[J,Object(n["createVNode"])(X,{type:"tel",id:"tel",name:"電話",class:["form-control panya-input",{"is-invalid":c["電話"]}],placeholder:"請輸入手機號碼",rules:Q.isPhone,inputmode:"tel",modelValue:K.user.tel,"onUpdate:modelValue":t[6]||(t[6]=function(e){return K.user.tel=e})},null,8,["class","rules","modelValue"]),Object(n["createVNode"])(Y,{name:"電話",class:"invalid-feedback"})]),Object(n["createVNode"])("li",z,[I,Object(n["createVNode"])(X,{type:"text",id:"address",name:"地址",class:["form-control panya-input",{"is-invalid":c["地址"]}],placeholder:"請輸入地址",rules:"required",modelValue:K.user.address,"onUpdate:modelValue":t[7]||(t[7]=function(e){return K.user.address=e})},null,8,["class","modelValue"]),Object(n["createVNode"])(Y,{name:"地址",class:"invalid-feedback"})]),Object(n["createVNode"])("li",null,[L,Object(n["withDirectives"])(Object(n["createVNode"])("textarea",{id:"message",class:"form-control panya-input",rows:"3","onUpdate:modelValue":t[8]||(t[8]=function(e){return K.message=e})},null,512),[[n["vModelText"],K.message]])])]),G]})),_:1},8,["onSubmit"])])])):(Object(n["openBlock"])(),Object(n["createBlock"])("div",i,[s,l,Object(n["createVNode"])(R,{class:"btn btn-primary py-2 px-4",to:"/products?category=all&page=1"},{default:Object(n["withCtx"])((function(){return[u]})),_:1})]))])}var K=c("a397"),Q={emits:["page-loading","push-message","toggle-spinner","get-cart"],props:["datas"],data:function(){return{user:{email:"",name:"",tel:"",address:""},message:"",code:"panyaonline70",carts:"",isDiscount:!1}},methods:{useCoupon:function(){var e=this,t={code:this.code};this.$emitter.emit("toggle-spinner",this.code),Object(K["v"])({data:t}).then((function(t){e.$pushMessage(t),e.$emitter.emit("get-cart"),e.isDiscount=!0,e.$emitter.emit("toggle-spinner",!1)})).catch((function(t){e.$emitter.emit("page-loading",!1),e.$pushMessage(t)}))},isPhone:function(e){var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"請輸入正確的手機號碼"},onSubmit:function(){var e=this;this.$emitter.emit("page-loading",!0),Object(K["c"])({data:{user:this.user,message:this.message}}).then((function(t){t.data.success&&(e.$emitter.emit("get-cart"),e.$refs.order.resetForm(),e.$router.push("/checkout/".concat(t.data.orderId))),e.$pushMessage(t),e.$emitter.emit("page-loading",!1)})).catch((function(t){e.$emitter.emit("page-loading",!1),e.$pushMessage(t)}))}},watch:{datas:function(e){e.final_total!==e.total?this.isDiscount=!0:this.isDiscount=!1}},mounted:function(){this.$emit("get-cart"),this.$emitter.emit("page-loading",!0)},updated:function(){this.$emitter.emit("page-loading",!1)}},R=c("6b0d"),W=c.n(R);const X=W()(Q,[["render",H]]);t["default"]=X}}]);
//# sourceMappingURL=chunk-50a6cc86.11500eb4.js.map