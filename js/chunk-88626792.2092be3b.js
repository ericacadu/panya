(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-88626792"],{"07ac":function(e,t,a){var c=a("23e7"),o=a("6f53").values;c({target:"Object",stat:!0},{values:function(e){return o(e)}})},2909:function(e,t,a){"use strict";function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,c=new Array(t);a<t;a++)c[a]=e[a];return c}function o(e){if(Array.isArray(e))return c(e)}a.d(t,"a",(function(){return s}));a("a4d3"),a("e01a"),a("d3b7"),a("d28b"),a("3ca3"),a("ddb0"),a("a630");function l(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}a("fb6a"),a("b0c0");function i(e,t){if(e){if("string"===typeof e)return c(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?c(e,t):void 0}}function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e){return o(e)||l(e)||i(e)||r()}},"498a":function(e,t,a){"use strict";var c=a("23e7"),o=a("58a8").trim,l=a("c8d2");c({target:"String",proto:!0,forced:l("trim")},{trim:function(){return o(this)}})},"59b6":function(e,t,a){"use strict";a("7f47")},"5cbd":function(e,t,a){"use strict";var c={data:function(){return{isValid:!1}},methods:{validation:function(){var e=this,t=document.querySelector(".needs-validation");t.addEventListener("submit",(function(a){e.validated(a,t)})),t.addEventListener("change",(function(a){e.validated(a,t)}))},validated:function(e,t){t.classList.remove("was-validated"),t.checkValidity()?this.isValid=!0:(e.preventDefault(),e.stopPropagation(),this.isValid=!1),t.classList.add("was-validated")}},mounted:function(){this.validation()}};a("59b6");const o=c;t["a"]=o},"6da5":function(e,t,a){"use strict";var c=a("7a23"),o={class:"modal fade",id:"deleteModal","data-bs-keyboard":"false"},l={class:"modal-dialog modal-dialog-centered"},i={class:"modal-content border-0"},r={class:"modal-header bg-dark p-3 text-light"},s=Object(c["createVNode"])("button",{type:"button",class:"btn-close me-1","data-bs-dismiss":"modal"},[Object(c["createVNode"])("i",{class:"material-icons"},"close")],-1),n={class:"modal-body pt-4 pb-5"},d={class:"modal-footer"},u=Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function b(e,t,a,b,p,m){return Object(c["openBlock"])(),Object(c["createBlock"])("div",o,[Object(c["createVNode"])("div",l,[Object(c["createVNode"])("div",i,[Object(c["createVNode"])("div",r,[Object(c["renderSlot"])(e.$slots,"title"),s]),Object(c["createVNode"])("div",n,[Object(c["renderSlot"])(e.$slots,"default")]),Object(c["createVNode"])("div",d,[u,Object(c["createVNode"])("button",{type:"button",class:"btn btn-danger",onClick:t[1]||(t[1]=function(t){return e.$emit("delete-data",p.datas)})}," 確定刪除 ")])])])])}var p={props:["modalData"],emits:["delete-data"],data:function(){return{datas:{}}},watch:{modalData:function(){this.datas=this.modalData}}},m=a("6b0d"),f=a.n(m);const g=f()(p,[["render",b]]);t["a"]=g},"6f53":function(e,t,a){var c=a("83ab"),o=a("df75"),l=a("fc6a"),i=a("d1e7").f,r=function(e){return function(t){var a,r=l(t),s=o(r),n=s.length,d=0,u=[];while(n>d)a=s[d++],c&&!i.call(r,a)||u.push(e?[a,r[a]]:r[a]);return u}};e.exports={entries:r(!0),values:r(!1)}},"7db0":function(e,t,a){"use strict";var c=a("23e7"),o=a("b727").find,l=a("44d2"),i="find",r=!0;i in[]&&Array(1)[i]((function(){r=!1})),c({target:"Array",proto:!0,forced:r},{find:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}}),l(i)},"7f47":function(e,t,a){},a434:function(e,t,a){"use strict";var c=a("23e7"),o=a("23cb"),l=a("a691"),i=a("50c4"),r=a("7b0b"),s=a("65f0"),n=a("8418"),d=a("1dde"),u=d("splice"),b=Math.max,p=Math.min,m=9007199254740991,f="Maximum allowed length exceeded";c({target:"Array",proto:!0,forced:!u},{splice:function(e,t){var a,c,d,u,g,h,j=r(this),O=i(j.length),v=o(e,O),V=arguments.length;if(0===V?a=c=0:1===V?(a=0,c=O-v):(a=V-2,c=p(b(l(t),0),O-v)),O+a-c>m)throw TypeError(f);for(d=s(j,c),u=0;u<c;u++)g=v+u,g in j&&n(d,u,j[g]);if(d.length=c,a<c){for(u=v;u<O-c;u++)g=u+c,h=u+a,g in j?j[h]=j[g]:delete j[h];for(u=O;u>O-c+a;u--)delete j[u-1]}else if(a>c)for(u=O-c;u>v;u--)g=u+c-1,h=u+a-1,g in j?j[h]=j[g]:delete j[h];for(u=0;u<a;u++)j[u+v]=arguments[u+2];return j.length=O-c+a,d}})},c8d2:function(e,t,a){var c=a("d039"),o=a("5899"),l="​᠎";e.exports=function(e){return c((function(){return!!o[e]()||l[e]()!=l||o[e].name!==e}))}},d28b:function(e,t,a){var c=a("746f");c("iterator")},d416:function(e,t,a){"use strict";a.r(t);var c=a("7a23"),o={class:"container-fluid"},l={class:"d-flex justify-content-between mb-3"},i=Object(c["createVNode"])("option",{value:"all",selected:""},"全部商品",-1),r=Object(c["createVNode"])("i",{class:"material-icons me-1"},"add_circle_outline",-1),s=Object(c["createTextVNode"])(" 新增商品 "),n=Object(c["createStaticVNode"])('<ul class="row g-0 list-unstyled rounded p-2 products-list-header text-nowrap"><li class="col-1 d-none d-md-block">分類</li><li class="col-3 text-start">商品名稱</li><li class="col-2">原價</li><li class="col-2">售價</li><li class="col-1">啟用</li><li class="col-1">推薦</li><li class="col-3 col-md-2"></li></ul>',1),d={class:"list-group list-group-flush shadow-sm"},u={class:"col-1 d-none d-md-block"},b={class:"col-3 text-start"},p={class:"col-2"},m={class:"col-2"},f={class:"col-1 text-success"},g={key:0,class:"material-icons fs-5"},h={class:"col-1 text-warning"},j={key:0,class:"material-icons fs-5"},O={class:"col-3 col-md-2 d-flex justify-content-center"},v=Object(c["createTextVNode"])(" 是否刪除 "),V={class:"text-danger"},N=Object(c["createTextVNode"])(" 商品？ "),y=Object(c["createVNode"])("small",{class:"text-muted"},"(刪除後將無法恢復)",-1);function k(e,t,a,k,D,x){var w=Object(c["resolveComponent"])("Pagination"),U=Object(c["resolveComponent"])("ProductModal"),M=Object(c["resolveComponent"])("DeleteModal");return Object(c["openBlock"])(),Object(c["createBlock"])("div",o,[Object(c["createVNode"])("div",l,[Object(c["withDirectives"])(Object(c["createVNode"])("select",{class:"form-select","onUpdate:modelValue":t[1]||(t[1]=function(e){return D.filterInput=e}),onChange:t[2]||(t[2]=function(e){return x.filterProducts(1)})},[i,(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(D.category,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])("option",{key:t,value:e},Object(c["toDisplayString"])(e),9,["value"])})),128))],544),[[c["vModelSelect"],D.filterInput]]),Object(c["createVNode"])("button",{class:"btn btn-primary ms-auto",type:"button",onClick:t[3]||(t[3]=function(){return x.openModal&&x.openModal.apply(x,arguments)})},[r,s])]),n,Object(c["createVNode"])("ul",d,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(D.filterDatas,(function(e){return Object(c["openBlock"])(),Object(c["createBlock"])("li",{class:"list-group-item p-2",key:e.id},[Object(c["createVNode"])("div",u,Object(c["toDisplayString"])(e.category),1),Object(c["createVNode"])("div",b,Object(c["toDisplayString"])(e.title),1),Object(c["createVNode"])("div",p,Object(c["toDisplayString"])(e.origin_price),1),Object(c["createVNode"])("div",m,Object(c["toDisplayString"])(e.price),1),Object(c["createVNode"])("div",f,[e.is_enabled?(Object(c["openBlock"])(),Object(c["createBlock"])("span",g,"check_circle")):Object(c["createCommentVNode"])("",!0)]),Object(c["createVNode"])("div",h,[e.is_promote?(Object(c["openBlock"])(),Object(c["createBlock"])("span",j,"check_circle")):Object(c["createCommentVNode"])("",!0)]),Object(c["createVNode"])("div",O,[Object(c["createVNode"])("button",{class:"btn btn-sm btn-outline-primary fs-7",type:"button",onClick:function(t){return x.openModal("edit",e)}}," 編輯 ",8,["onClick"]),Object(c["createVNode"])("button",{class:"btn btn-sm btn-outline-danger fs-7 ms-2 ms-md-3",type:"button",onClick:function(t){return x.openModal("delete",e)}}," 刪除 ",8,["onClick"])])])})),128))]),Object(c["createVNode"])(w,{pages:D.pages,onGetDatas:x.filterProducts},null,8,["pages","onGetDatas"]),Object(c["createVNode"])(U,{modalData:D.modalData,onUpdateData:x.updateProduct},{title:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(D.modalTitle),1)]})),_:1},8,["modalData","onUpdateData"]),Object(c["createVNode"])(M,{modalData:D.deleteData,onDeleteData:x.deleteProduct},{title:Object(c["withCtx"])((function(){return[Object(c["createTextVNode"])(Object(c["toDisplayString"])(D.modalTitle),1)]})),default:Object(c["withCtx"])((function(){return[v,Object(c["createVNode"])("span",V,Object(c["toDisplayString"])(D.deleteData.title),1),N,y]})),_:1},8,["modalData","onDeleteData"])])}var D=a("2909"),x=(a("07ac"),a("d81d"),a("d3b7"),a("6062"),a("3ca3"),a("ddb0"),a("4de4"),a("a397")),w=a("25f3"),U=(a("a4d3"),a("e01a"),{class:"modal-dialog modal-dialog-centered"}),M={class:"modal-content border-0"},B={class:"modal-header bg-dark p-3 text-light"},S=Object(c["createVNode"])("button",{type:"button",class:"btn-close me-1","data-bs-dismiss":"modal"},[Object(c["createVNode"])("i",{class:"material-icons"},"close")],-1),$={class:"modal-body"},C={class:"nav nav-pills rounded p-2 mb-3",id:"pills-tab",ref:"pills-tab",role:"tablist"},A=Object(c["createVNode"])("li",{class:"nav-item",role:"presentation"},[Object(c["createVNode"])("button",{class:"nav-link active",id:"pills-info-tab","data-bs-toggle":"pill","data-bs-target":"#pills-info",type:"button",role:"tab"}," 商品資訊 ")],-1),T=Object(c["createVNode"])("li",{class:"nav-item",role:"presentation"},[Object(c["createVNode"])("button",{class:"nav-link",id:"pills-content-tab","data-bs-toggle":"pill","data-bs-target":"#pills-content",type:"button",role:"tab"}," 商品內容 ")],-1),_=Object(c["createVNode"])("li",{class:"nav-item",role:"presentation"},[Object(c["createVNode"])("button",{class:"nav-link",id:"pills-photo-tab","data-bs-toggle":"pill","data-bs-target":"#pills-photo",type:"button",role:"tab"}," 商品圖片 ")],-1),I={class:"tab-content",id:"pills-tabContent"},P={class:"tab-pane fade show active",id:"pills-info",role:"tabpanel"},L={class:"row g-2"},F={class:"col-8"},q=Object(c["createVNode"])("label",{class:"form-label",for:"product-title"},[Object(c["createTextVNode"])(" 商品名稱"),Object(c["createVNode"])("small",{class:"text-danger ms-1"},"*")],-1),E={class:"col-4"},J=Object(c["createVNode"])("label",{class:"form-label",for:"product-category"},[Object(c["createTextVNode"])(" 商品類別"),Object(c["createVNode"])("small",{class:"text-danger ms-1"},"*")],-1),G=Object(c["createVNode"])("option",{value:"",selected:"",disabled:""},"選擇類別",-1),z={class:"col-4 mt-2"},H=Object(c["createVNode"])("label",{class:"form-label",for:"product-origin-price"},[Object(c["createTextVNode"])(" 原價"),Object(c["createVNode"])("small",{class:"text-danger ms-1"},"*")],-1),K={class:"col-4 mt-2"},Q=Object(c["createVNode"])("label",{class:"form-label",for:"product-price"},[Object(c["createTextVNode"])(" 售價"),Object(c["createVNode"])("small",{class:"text-danger ms-1"},"*")],-1),R={class:"col-4 mt-2"},W=Object(c["createVNode"])("label",{class:"form-label",for:"product-unit"},[Object(c["createTextVNode"])(" 單位"),Object(c["createVNode"])("small",{class:"text-danger ms-1"},"*")],-1),X=Object(c["createVNode"])("option",{value:"",selected:"",disabled:""},"選擇單位",-1),Y=Object(c["createVNode"])("hr",{class:"mt-4"},null,-1),Z={class:"col-4 d-flex align-items-center"},ee=Object(c["createVNode"])("label",{class:"form-label m-0",for:"product-active"},"啟用商品",-1),te={class:"switch-group ms-2"},ae=Object(c["createVNode"])("div",{class:"ico_switch"},null,-1),ce={class:"col-4 d-flex align-items-center"},oe=Object(c["createVNode"])("label",{class:"form-label m-0",for:"product-promote"},"啟用推薦",-1),le={class:"switch-group ms-2"},ie=Object(c["createVNode"])("div",{class:"ico_switch"},null,-1),re={class:"tab-pane fade",id:"pills-content",role:"tabpanel"},se={class:"row g-0"},ne={class:"col-12"},de=Object(c["createVNode"])("label",{class:"form-label",for:"product-desc"},"商品描述",-1),ue={class:"col-12 mt-2"},be=Object(c["createVNode"])("label",{class:"form-label",for:"product-content"},"商品內容",-1),pe={class:"tab-pane fade",id:"pills-photo",role:"tabpanel"},me={class:"row g-0"},fe={key:0,class:"col-12 d-flex justify-content-between"},ge=Object(c["createVNode"])("i",{class:"material-icons"},"photo",-1),he={key:1,class:"col-12 d-flex"},je=Object(c["createVNode"])("i",{class:"material-icons"},"remove",-1),Oe={key:0},ve=Object(c["createVNode"])("i",{class:"fas fa-star text-warning"},null,-1),Ve={key:1},Ne=Object(c["createVNode"])("i",{class:"far fa-star text-warning"},null,-1),ye=Object(c["createTextVNode"])(" 設定主圖 "),ke={class:"col-12 mt-3"},De=Object(c["createVNode"])("label",{class:"form-label",for:"product-image-url"},"圖片連結",-1),xe={class:"input-group"},we={class:"col-12 mt-3"},Ue=Object(c["createVNode"])("label",{class:"form-label",for:"product-upload-file"},"上傳檔案",-1),Me={class:"input-group"},Be={class:"modal-footer"},Se=Object(c["createVNode"])("button",{type:"button",class:"btn btn-outline-secondary","data-bs-dismiss":"modal"}," 取消 ",-1);function $e(e,t,a,o,l,i){return Object(c["openBlock"])(),Object(c["createBlock"])("form",{class:"modal fade needs-validation",id:"productModal","data-bs-backdrop":"static","data-bs-keyboard":"false",novalidate:"",onSubmit:t[16]||(t[16]=Object(c["withModifiers"])((function(){}),["prevent"]))},[Object(c["createVNode"])("div",U,[Object(c["createVNode"])("div",M,[Object(c["createVNode"])("div",B,[Object(c["renderSlot"])(e.$slots,"title"),S]),Object(c["createVNode"])("div",$,[Object(c["createVNode"])("ul",C,[A,T,_],512),Object(c["createVNode"])("div",I,[Object(c["createVNode"])("div",P,[Object(c["createVNode"])("div",L,[Object(c["createVNode"])("div",F,[q,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"text",id:"product-title",class:"form-control",placeholder:"輸入商品名稱","onUpdate:modelValue":t[1]||(t[1]=function(e){return l.datas.title=e}),required:""},null,512),[[c["vModelText"],l.datas.title]])]),Object(c["createVNode"])("div",E,[J,Object(c["withDirectives"])(Object(c["createVNode"])("select",{id:"product-category",class:"form-control form-select","onUpdate:modelValue":t[2]||(t[2]=function(e){return l.datas.category=e}),onChange:t[3]||(t[3]=function(){return e.checkInput&&e.checkInput.apply(e,arguments)}),required:""},[G,(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(l.category,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])("option",{key:t,value:e},Object(c["toDisplayString"])(e),9,["value"])})),128))],544),[[c["vModelSelect"],l.datas.category]])]),Object(c["createVNode"])("div",z,[H,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"number",min:"0",id:"product-origin-price",class:"form-control",placeholder:"輸入原價","onUpdate:modelValue":t[4]||(t[4]=function(e){return l.datas.origin_price=e}),required:""},null,512),[[c["vModelText"],l.datas.origin_price,void 0,{number:!0}]])]),Object(c["createVNode"])("div",K,[Q,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"number",min:"0",id:"product-price",class:"form-control",placeholder:"輸入售價","onUpdate:modelValue":t[5]||(t[5]=function(e){return l.datas.price=e}),required:""},null,512),[[c["vModelText"],l.datas.price,void 0,{number:!0}]])]),Object(c["createVNode"])("div",R,[W,Object(c["withDirectives"])(Object(c["createVNode"])("select",{id:"product-unit",class:"form-control form-select","onUpdate:modelValue":t[6]||(t[6]=function(e){return l.datas.unit=e}),required:""},[X,(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(l.unit,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])("option",{key:t,value:e},Object(c["toDisplayString"])(e),9,["value"])})),128))],512),[[c["vModelSelect"],l.datas.unit]])]),Y,Object(c["createVNode"])("div",Z,[ee,Object(c["createVNode"])("div",te,[Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"checkbox",id:"product-active",role:"button","onUpdate:modelValue":t[7]||(t[7]=function(e){return l.datas.is_enabled=e}),checked:l.datas.is_enabled},null,8,["checked"]),[[c["vModelCheckbox"],l.datas.is_enabled]]),ae])]),Object(c["createVNode"])("div",ce,[oe,Object(c["createVNode"])("div",le,[Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"checkbox",id:"product-promote",role:"button","onUpdate:modelValue":t[8]||(t[8]=function(e){return l.datas.is_promote=e}),checked:l.datas.is_promote},null,8,["checked"]),[[c["vModelCheckbox"],l.datas.is_promote]]),ie])])])]),Object(c["createVNode"])("div",re,[Object(c["createVNode"])("div",se,[Object(c["createVNode"])("div",ne,[de,Object(c["withDirectives"])(Object(c["createVNode"])("textarea",{id:"product-desc",class:"form-control",placeholder:"輸入商品描述",row:"5","onUpdate:modelValue":t[9]||(t[9]=function(e){return l.datas.description=e})},null,512),[[c["vModelText"],l.datas.description]])]),Object(c["createVNode"])("div",ue,[be,Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"text",class:"form-control",id:"product-content",placeholder:"輸入商品內容","onUpdate:modelValue":t[10]||(t[10]=function(e){return l.datas.content=e})},null,512),[[c["vModelText"],l.datas.content]])])])]),Object(c["createVNode"])("div",pe,[Object(c["createVNode"])("div",me,[l.datas.imagesUrl.length?(Object(c["openBlock"])(),Object(c["createBlock"])("div",he,[(Object(c["openBlock"])(!0),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(l.datas.imagesUrl,(function(e,t){return Object(c["openBlock"])(),Object(c["createBlock"])("div",{class:["show-image rounded",l.datas.imageUrl==e?"active":""],key:t,style:{"background-image":"url(".concat(e,")")}},[Object(c["createVNode"])("span",{class:"btn-close m-2 p-2",role:"button",onClick:function(t){return i.removeImage(e)}},[je],8,["onClick"]),Object(c["createVNode"])("label",{for:"main-image"+t,role:"button",class:"py-1"},[Object(c["createVNode"])("input",{type:"radio",id:"main-image"+t,onClick:function(t){return l.datas.imageUrl=e},checked:e==l.datas.imageUrl},null,8,["id","onClick","checked"]),e==l.datas.imageUrl?(Object(c["openBlock"])(),Object(c["createBlock"])("span",Oe,[ve])):(Object(c["openBlock"])(),Object(c["createBlock"])("span",Ve,[Ne])),ye],8,["for"])],6)})),128))])):(Object(c["openBlock"])(),Object(c["createBlock"])("div",fe,[(Object(c["openBlock"])(),Object(c["createBlock"])(c["Fragment"],null,Object(c["renderList"])(3,(function(e,t){return Object(c["createVNode"])("div",{class:"place-image rounded",key:t},[ge])})),64))])),Object(c["createVNode"])("div",ke,[De,Object(c["createVNode"])("div",xe,[Object(c["withDirectives"])(Object(c["createVNode"])("input",{type:"text",class:"form-control",id:"product-image-url",placeholder:"輸入圖片連結","onUpdate:modelValue":t[11]||(t[11]=function(e){return l.tempUrl=e}),disabled:l.datas.imagesUrl.length>=3},null,8,["disabled"]),[[c["vModelText"],l.tempUrl]]),Object(c["createVNode"])("button",{class:"btn btn-outline-secondary",disabled:l.datas.imagesUrl.length>=3,onClick:t[12]||(t[12]=function(){return i.uploadImage&&i.uploadImage.apply(i,arguments)})}," 上傳連結 ",8,["disabled"])])]),Object(c["createVNode"])("div",we,[Ue,Object(c["createVNode"])("div",Me,[Object(c["createVNode"])("input",{type:"file",name:"file-to-upload",class:"form-control",id:"product-upload-file",ref:"upload-file",onChange:t[13]||(t[13]=function(){return i.getUploadFile&&i.getUploadFile.apply(i,arguments)}),disabled:l.datas.imagesUrl.length>=3},null,40,["disabled"]),Object(c["createVNode"])("button",{class:"btn btn-outline-secondary",onClick:t[14]||(t[14]=function(){return i.uploadFile&&i.uploadFile.apply(i,arguments)}),disabled:l.datas.imagesUrl.length>=3}," 上傳檔案 ",8,["disabled"])])])])])])]),Object(c["createVNode"])("div",Be,[Se,Object(c["createVNode"])("button",{type:"submit",class:"btn btn-primary",onClick:t[15]||(t[15]=function(){return i.updateDatas&&i.updateDatas.apply(i,arguments)})}," 儲存 ")])])])],32)}a("159b"),a("a434"),a("498a"),a("7db0");var Ce=a("5cbd"),Ae={props:["modalData"],emits:["page-loading","push-message","update-data"],mixins:[Ce["a"]],data:function(){return{datas:{imageUrl:"",imagesUrl:[],relative:[]},category:["麵包","蛋糕","餅乾"],unit:["個","袋","片","盒"],tempUrl:"",uploadData:"",defaultCate:"選擇類別",defaultUnit:"選擇單位"}},methods:{filterSelected:function(){var e=this;this.products.forEach((function(t){var a=t,c=e.datas.relative.filter((function(e){return-1!==e.indexOf(t.id)}));c.length>0?a.is_relativ=!0:a.is_relativ=!1}))},toggleProduct:function(e){var t=this.datas.relative.filter((function(t){return-1!==t.indexOf(e)}));t.length<=0&&e.is_relativ?this.datas.relative.push(e.id):this.datas.relative.splice(e.id,1)},uploadImage:function(){var e=this.tempUrl.trim(),t=this.datas.imagesUrl.find((function(t){return t===e}));if(""!==e){if(t)return void this.$pushMessage(!1,"連結網址不可重複");this.datas.imagesUrl.push(this.tempUrl),this.tempUrl=""}else this.$pushMessage(!1,"請輸入連結網址")},getUploadFile:function(){var e=this.$refs["upload-file"].files[0];this.uploadData=e},uploadFile:function(){var e=this,t=new FormData;t.append("add-to-upload",this.uploadData),this.$refs["upload-file"].value?Object(x["B"])(t).then((function(t){t.data.success&&(e.datas.imagesUrl.push(t.data.imageUrl),e.$refs["upload-file"].value="",e.uploadData=""),e.$pushMessage(t,t.data.message||"上傳成功")})).catch((function(t){e.$emitter.emit("page-loading",!1),e.$pushMessage(t)})):this.$pushMessage(!1,"沒有選擇檔案")},removeImage:function(e){var t=this.datas.imagesUrl.filter((function(t){return e!==t}));this.datas.imagesUrl=t,e===this.datas.imageUrl&&this.autoPinImage(this.datas)},autoPinImage:function(e){var t=e.imagesUrl[0];this.datas.imageUrl=t||""},updateTabs:function(){var e=document.querySelectorAll(".nav-pills .nav-link"),t=document.querySelectorAll(".tab-pane"),a=function(e){e.forEach((function(e){return e.classList.remove("active")})),e[0].classList.add("active"),e[0].classList.add("show")};a(e),a(t)},updateDatas:function(){this.isValid&&(this.datas.category===this.defaultCate&&(this.datas.category=""),this.datas.unit===this.defaultUnit&&(this.datas.unit=""),this.$emit("update-data",this.datas))}},watch:{modalData:function(){this.datas=this.modalData,this.datas.category||(this.datas.category=this.defaultCate),this.datas.unit||(this.datas.unit=this.defaultUnit),this.updateTabs(),document.querySelector("form").classList.remove("was-validated"),this.validation(),this.$emitter.emit("page-loading",!1)},datas:{handler:function(e){e.imageUrl||this.autoPinImage(e),e.imagesUrl.length<=0&&(this.datas.imageUrl="")},deep:!0}}},Te=a("6b0d"),_e=a.n(Te);const Ie=_e()(Ae,[["render",$e]]);var Pe=Ie,Le=a("6da5"),Fe={emits:["page-loading","push-message"],components:{ProductModal:Pe,DeleteModal:Le["a"]},data:function(){return{products:[],category:[],pages:{},modal:{},modalTitle:"",isModal:"",modalData:[],deleteData:[],apiInfo:{method:"",id:""},filterDatas:[],filterInput:"all",tempArry:[]}},methods:{getAllProducts:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;Object(x["l"])().then((function(a){a.data.success||e.$pushMessage(a),e.products=Object.values(a.data.products).reverse();var c=e.products.map((function(e){return e.category})),o=new Set(c);e.category=Object(D["a"])(o),e.filterProducts(t),e.$emitter.emit("page-loading",!1)})).catch((function(t){e.$emitter.emit("page-loading",!1),e.$pushMessage(t)}))},filterProducts:function(e){var t=this;"all"===this.filterInput?this.tempArry=this.products:this.tempArry=this.products.filter((function(e){return e.category===t.filterInput}));var a=Object(w["g"])(e,this.tempArry);this.pages=a.pages,this.filterDatas=a.newArray,this.now_page=this.pages.current_page},updateProduct:function(e){var t=this,a=this.apiInfo,c=a.method,o=a.id;switch(this.isModal){case"edit":c="put",o=e.id;break;default:c="post",o="";break}this.$emitter.emit("page-loading",!0),Object(x["A"])(c,{data:e},o).then((function(e){e.data.success&&(t.getAllProducts(t.pages.current_page),t.modal.hide()),t.$pushMessage(e),t.$emitter.emit("page-loading",!1)})).catch((function(e){t.$emitter.emit("page-loading",!1),t.$pushMessage(e)}))},deleteProduct:function(e){var t=this;this.$emitter.emit("page-loading",!0),Object(x["j"])(e.id).then((function(e){e.data.success&&(t.getAllProducts(t.pages.current_page),t.modal.hide()),t.$pushMessage(e),t.$emitter.emit("page-loading",!1)})).catch((function(e){t.$emitter.emit("page-loading",!1),t.$pushMessage(e)}))},openModal:function(e,t){"edit"===e?(this.modal=Object(w["a"])("productModal"),this.isModal="edit",this.modalTitle="編輯商品",this.modalData=JSON.parse(JSON.stringify(t)),this.modalData.imagesUrl||(this.modalData.imagesUrl=[]),this.modalData.relative||(this.modalData.relative=[]),this.$emitter.emit("page-loading",!0)):"delete"===e?(this.isModal="delete",this.modal=Object(w["a"])("deleteModal"),this.modalTitle="刪除商品",this.deleteData=t):(this.modal=Object(w["a"])("productModal"),this.isModal="add",this.modalTitle="新增商品",this.modalData={imagesUrl:[],relative:[]}),this.modal.show()}},created:function(){this.$emitter.emit("page-loading",!0),this.getAllProducts()}};const qe=_e()(Fe,[["render",k]]);t["default"]=qe},d81d:function(e,t,a){"use strict";var c=a("23e7"),o=a("b727").map,l=a("1dde"),i=l("map");c({target:"Array",proto:!0,forced:!i},{map:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}})},fb6a:function(e,t,a){"use strict";var c=a("23e7"),o=a("861d"),l=a("e8b5"),i=a("23cb"),r=a("50c4"),s=a("fc6a"),n=a("8418"),d=a("b622"),u=a("1dde"),b=u("slice"),p=d("species"),m=[].slice,f=Math.max;c({target:"Array",proto:!0,forced:!b},{slice:function(e,t){var a,c,d,u=s(this),b=r(u.length),g=i(e,b),h=i(void 0===t?b:t,b);if(l(u)&&(a=u.constructor,"function"!=typeof a||a!==Array&&!l(a.prototype)?o(a)&&(a=a[p],null===a&&(a=void 0)):a=void 0,a===Array||void 0===a))return m.call(u,g,h);for(c=new(void 0===a?Array:a)(f(h-g,0)),d=0;g<h;g++,d++)g in u&&n(c,d,u[g]);return c.length=d,c}})}}]);
//# sourceMappingURL=chunk-88626792.2092be3b.js.map